<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real Estate Map</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="style/layout.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="map"></div>
    <div id="options">
        <div>
            <h1>Preferences</h1>
            <table id="preferences"></table>
        </div>
        <div>
            <h1>Requirements</h1>
            <table id="requirements"></table>
        </div>
        <div>
            <canvas id="radarChart" width="400" height="300"></canvas>
        </div>
        <div id="legend">
            <h2>Legend</h2>
            <img id="colors" src="img/magma.png">
            <div class="colorsLabels">
                <div class="childLeft">Unsuitable</div>
                <div class="childRight">Suitable</div>
            </div>
        </div>
        <div id="copyright">
            Â© Kadaster / Centraal Bureau voor de Statistiek, 2020
        </div>
    </div>
    <script type="module">

        // Select preferences and requirements

        const preferences = {
            "price": 1.0, 
            "urbanity": 0.5, 
            "healthcare": 0.0,
            "education": 0.0,
            "public_transport": 0.0,
        }

        const requirements = {
            "daycare": false,
            "grocery_store": false,
            "pharmacy": false,
            "library": false,
        }

        // Create radar chart
        
        import {Radar} from "./js/radar.js";
        const rc = new Radar();


        // Create chloropleth map

        import {Map} from "./js/map.js";
        const map = new Map(preferences, requirements,rc);

        // Create options panel

        import {Options} from "./js/options.js";
        const options = new Options(preferences, requirements, () => map.render());

       
        // Resize HTML components

        function resize() {

            const width = $("body").width() - $("#options").width() - 64;
            const height = Math.max($(window).height(), ($("#options").height() + 64));
            
            $("#map").css({
                width: width,
                height: height,
            });

            $("#colors").css({
                width: $("#options").width() - 2,
            });
            
            $("#copyright").css({
                width: $("#options").width(),
            })
            
            map.resize(width, height);
        }
        $(window).on("resize", resize);
        resize();

    </script>
</body>
</html>
